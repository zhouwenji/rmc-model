{# 继承原始的 RTD 主题模板 #}
{% extends "!layout.html" %}

{# 覆盖 content 块，在内容顶部添加语言切换按钮 #}
{% block content %}
  {% if theme_style_external_links|tobool %}
  <div class="rst-content style-external-links">
  {% else %}
  <div class="rst-content">
  {% endif %}
    {% include "breadcrumbs.html" %}
    <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
      <div itemprop="articleBody">
        {# 语言切换按钮 #}
        <p align="right" style="margin-bottom: 1em;">
          {% if 'zh/' in pagename or pagename. startswith('zh') %}
            <a href="{{ pathto(pagename. replace('zh/', '')) }}">
              <img src="https://img.shields.io/badge/lang-English-blue? style=for-the-badge" alt="English">
            </a>
            <a href="{{ pathto(pagename) }}">
              <img src="https://img.shields.io/badge/lang-中文-red?style=for-the-badge" alt="中文">
            </a>
          {% else %}
            <a href="{{ pathto(pagename) }}">
              <img src="https://img.shields.io/badge/lang-English-blue?style=for-the-badge" alt="English">
            </a>
            <a href="{{ pathto('zh/' + pagename) }}">
              <img src="https://img.shields.io/badge/lang-中文-red?style=for-the-badge" alt="中文">
            </a>
          {% endif %}
        </p>
        {# 原始页面内容 #}
        {% block body %}{% endblock %}
      </div>
      {% if self.comments()|trim %}
        <div class="articleComments">
          {% block comments %}{% endblock %}
        </div>
      {% endif %}
    </div>
    {% include "footer.html" %}
  </div>
{% endblock %}

{# 覆盖导航菜单块 #}
{% block menu %}
  {% if 'zh/' in pagename or pagename.startswith('zh') %}
    {# 中文页面显示中文导航 #}
    <ul>
      <li class="toctree-l1"><a class="reference internal" href="{{ pathto('zh/chap1') }}">1. 模型概述</a></li>
      <li class="toctree-l1"><a class="reference internal" href="{{ pathto('zh/chap2') }}">2. 参考能源系统</a></li>
      <li class="toctree-l1"><a class="reference internal" href="{{ pathto('zh/chap3') }}">3. 社会经济因素</a></li>
      <li class="toctree-l1"><a class="reference internal" href="{{ pathto('zh/chap4') }}">4. 钢铁模块：RMC|Steel</a></li>
      <li class="toctree-l1"><a class="reference internal" href="{{ pathto('zh/chap5') }}">5. 交通模块：RMC|Transport</a></li>
      <li class="toctree-l1"><a class="reference internal" href="{{ pathto('zh/publications') }}">相关论文发表与研究项目</a></li>
      <li class="toctree-l1"><a class="reference internal" href="{{ pathto('zh/references') }}">参考文献</a></li>
    </ul>
  {% else %}
    {# 英文页面使用默认导航 #}
    {{ super() }}
  {% endif %}
{% endblock %}
